// graph.c// Comp1927 Assignment2 June 3 2016// Written by John Shepherd, March 2013// Modified by Winnie Zheng & Vivian Bakiris#include <stdlib.h>#include <stdio.h>#include <assert.h>#include <string.h>#include "graph.h"#include "DLList.h"#define strEQ(g,t) (strcmp((g),(t)) == 0)typedef unsigned char Num;typedef struct GraphRep {    int   nV;    char  **vertex;    Num   **edges;} GraphRep;// Function signaturesGraph newGraph();//static int ID = 0;// newGraph()// - create an initially empty GraphGraph newGraph(int nV, DLListPR urls){    Graph new = malloc(sizeof(GraphRep));    assert(new != NULL);    int i, j;    new->nV = nV;    new->vertex = malloc(nV*sizeof(char *));    assert(new->vertex != NULL);    new->edges = malloc(nV*sizeof(Num *));    assert(new->edges != NULL);    for (i = 0; i < nV; i++) {        new->vertex[i] = urls->first->data;        urls->first = urls->first->next;        //printf("url is %s\n",urls->first->data);        new->edges[i] = malloc(nV*sizeof(Num));        assert(new->edges[i] != NULL);        for (j = 0; j < nV; j++)            new->edges[i][j] = 0;    }    return new;}// disposeGraph(Graph)// - clean up memory associated with Graphvoid disposeGraph(Graph g){    if (g == NULL) return;    int i;    for (i = 0; i < g->nV; i++) {        free(g->vertex[i]);    }    free(g->edges);}// addEdge(Graph,Src,Dest)// - add an edge from Src to Dest// - returns 1 if edge successfully added// - returns 0 if unable to add edge//   (usually because nV exceeds nV)int addEdge(Graph g, char *src, char *dest){    assert(g != NULL);  // printf("src, dest, vertex %s, %s, %d\n", src, g->vertex[0], g->nV);    int v = vertexID(src, g->vertex, g->nV);    int w = vertexID(dest,g->vertex,g->nV);        if(v != -1 || w != -1) {    g->edges[v][w] = 1;    }    return 1;}// isConnected(Graph,Src,Dest)// - check whether there is an edge from Src->Destint isConnected(Graph g, int v, int w){    assert(g != NULL);//    int v = vertexID(src,g->vertex,g->nV);  //  int w = vertexID(dest,g->vertex,g->nV);    if (v < 0 || w < 0)        return 0;    else     //   printf("%d and %d are connected %d\n", v,w,g->edges[v][w]);        return g->edges[v][w];    }// nVertices(Graph)// - return # vertices currently in Graphint nVertices(Graph g){    assert(g != NULL);    return (g->nV);}// showGraph(Graph)// - display Graphvoid showGraph(Graph g, int mode){    assert(g != NULL);    if (g->nV == 0)        printf("Graph is empty\n");    else {        printf("Graph has %d vertices:\n",g->nV);        int i, j;        if (mode == 1) {            for (i = 0; i < g->nV; i++) {                for (j = 0; j < g->nV; j++)                    printf("%d",g->edges[i][j]);                                putchar('\n');            }        }        else {            for (i = 0; i < g->nV; i++) {                printf("Vertex: %s\n", g->vertex[i]);                printf("connects to\n");                for (j = 0; j < g->nV; j++) {                    if (g->edges[i][j])                        printf("   %s\n",g->vertex[j]);                }            }        }    }}// Helper functions// vertexID(Str,Names,N)// - searches for Str in array of Names[N]// - returns index of Str if found, -1 if notint vertexID(char *str, char **names, int N){ int i;    for (i = 0; i < N; i++)        if (strEQ(str,names[i])) return i;    return -1;}// addVertex(Str,Names,N)// - add Str at end of Namesint addVertex(char *str, char **names, int N){    names[N] = strdup(str);    return N;}//ID to vertex - used for pagerank calculationschar * IDtoVertex(Graph g, int ID){      //  char * vertex = malloc(g->nV *sizeof(char));    int i;    for(i = 0; i < g->nV; i++) {        if(ID == i) {        //    printf("vertex name: %s\n", g->vertex[i]);            break;        }            }            return g->vertex[i];        }